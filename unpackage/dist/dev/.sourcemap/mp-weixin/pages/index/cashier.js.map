{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/ysby/ysby/main.js","webpack:///C:/Users/Administrator/Desktop/ysby/ysby/pages/index/cashier.vue?ea62","webpack:///C:/Users/Administrator/Desktop/ysby/ysby/pages/index/cashier.vue?f3db","webpack:///C:/Users/Administrator/Desktop/ysby/ysby/pages/index/cashier.vue?24b2","webpack:///C:/Users/Administrator/Desktop/ysby/ysby/pages/index/cashier.vue?8c6b","webpack:///C:/Users/Administrator/Desktop/ysby/ysby/pages/index/cashier.vue","webpack:///C:/Users/Administrator/Desktop/ysby/ysby/pages/index/cashier.vue?6565"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","uid","token","type","platform","contact","money","orderno","loading","price","providerList","onLoad","p","uni","getSystemInfoSync","userInfo","getStorageSync","undefined","orderId","getProviders","methods","to","w","radioChange","e","detail","value","restPay","requestPayment","weixinPay","console","log","login","success","request","url","code","res","statusCode","ret","payment","paymentData","timeStamp","nonceStr","package","signType","paySign","showToast","title","fail","showModal","content","errMsg","showCancel","complete","desc","getOrderInfo","orderInfo","provider","appid","Promise","result","$loading","that","params","$apiPost","then","hideLoading","$msg","$emit","setTimeout","redirectTo"],"mappings":"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","file":"pages/index/cashier.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/cashier.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cashier.vue?vue&type=template&id=ee071ec6&\"\nvar renderjs\nimport script from \"./cashier.vue?vue&type=script&lang=js&\"\nexport * from \"./cashier.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cashier.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"ysby/ysby/pages/index/cashier.vue\"\nexport default component.exports","export * from \"-!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cashier.vue?vue&type=template&id=ee071ec6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cashier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cashier.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default{\n\tdata(){\n\t\treturn {\n\t\t\tuid:'',\n\t\t\ttoken:'',\n\t\t\ttype:'',\n\t\t\tplatform:'',\n\t\t\tcontact:'',\n\t\t\tmoney:'',\n\t\t\torderno:'',\n\t\t\tloading: false,\n\t\t\tprice: 0.01,\n\t\t\tproviderList: []\n\t\t}\n\t},\n\tonLoad(p){\n\t\tthis.platform=uni.getSystemInfoSync().platform\n\t\tvar userInfo=uni.getStorageSync('userInfo')\n\t\tif(userInfo!='' & userInfo!=null & userInfo!=undefined){\n\t\t\tthis.uid=userInfo.uid\n\t\t\tthis.token=userInfo.token\n\t\t}\n\t\tthis.contact=p.contact\n\t\tthis.orderno=p.orderId\n\t\tthis.money=p.money\n\t\tthis.getProviders()\n\t},\n\tmethods:{\n\t\tto(w){\n\t\t\t\n\t\t\t// uni.navigateTo({\n\t\t\t// \turl:'./payResult'\n\t\t\t// })\n\t\t},\n\t\tradioChange(e){\n\t\t\tthis.type=e.detail.value\n\t\t\tif(this.type=='rest'){\n\t\t\t\tthis.restPay()\n\t\t\t}else{\n\t\t\t\tthis.requestPayment(this.type)\n\t\t\t}\n\t\t\t// if(this.type=='wxpay'){\n\t\t\t// \tthis.weixinPay()\n\t\t\t// }else{\n\t\t\t\t// \n\t\t\t// }\n\t\t},\n\t\tgetProviders(){\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t},\n\t\tweixinPay() {\n\t\t    console.log(\"发起支付\");\n\t\t    this.loading = true;\n\t\t    uni.login({\n\t\t        success: (e) => {\n\t\t            console.log(\"login success\", e);\n\t\t            uni.request({\n\t\t                url: `https://unidemo.dcloud.net.cn/payment/wx/mp?code=${e.code}&amount=${this.price}`,\n\t\t                success: (res) => {\n\t\t                    console.log(\"pay request success\", res);\n\t\t                    if (res.statusCode !== 200) {\n\t\t                        uni.showModal({\n\t\t                            content: \"支付失败，请重试！\",\n\t\t                            showCancel: false\n\t\t                        });\n\t\t                        return;\n\t\t                    }\n\t\t                    if (res.data.ret === 0) {\n\t\t                        console.log(\"得到接口prepay_id\", res.data.payment);\n\t\t                        let paymentData = res.data.payment;\n\t\t                        uni.requestPayment({\n\t\t                            timeStamp: paymentData.timeStamp,\n\t\t                            nonceStr: paymentData.nonceStr,\n\t\t                            package: paymentData.package,\n\t\t                            signType: 'MD5',\n\t\t                            paySign: paymentData.paySign,\n\t\t                            success: (res) => {\n\t\t                                uni.showToast({\n\t\t                                    title: \"感谢您的赞助!\"\n\t\t                                })\n\t\t                            },\n\t\t                            fail: (res) => {\n\t\t                                uni.showModal({\n\t\t                                    content: \"支付失败,原因为: \" + res\n\t\t                                        .errMsg,\n\t\t                                    showCancel: false\n\t\t                                })\n\t\t                            },\n\t\t                            complete: () => {\n\t\t                                this.loading = false;\n\t\t                            }\n\t\t                        })\n\t\t                    } else {\n\t\t                        uni.showModal({\n\t\t                            content: res.data.desc,\n\t\t                            showCancel: false\n\t\t                        })\n\t\t                    }\n\t\t                },\n\t\t                fail: (e) => {\n\t\t                    console.log(\"fail\", e);\n\t\t                    this.loading = false;\n\t\t                    uni.showModal({\n\t\t                        content: \"支付失败,原因为: \" + e.errMsg,\n\t\t                        showCancel: false\n\t\t                    })\n\t\t                }\n\t\t            })\n\t\t        },\n\t\t        fail: (e) => {\n\t\t            console.log(\"fail\", e);\n\t\t            this.loading = false;\n\t\t            uni.showModal({\n\t\t                content: \"支付失败,原因为: \" + e.errMsg,\n\t\t                showCancel: false\n\t\t            })\n\t\t        }\n\t\t    })\n\t\t},\n\t\tasync requestPayment(e) {\n\t\t    this.loading = true;\n\t\t    let orderInfo = await this.getOrderInfo(e);\n\t\t\tconsole.log(orderInfo)\n\t\t    console.log(\"得到订单信息\", orderInfo);\n\t\t    if (orderInfo.statusCode !== 200) {\n\t\t        console.log(\"获得订单信息失败\", orderInfo);\n\t\t        uni.showModal({\n\t\t            content: \"获得订单信息失败\",\n\t\t            showCancel: false\n\t\t        })\n\t\t        return;\n\t\t    }\n\t\t    uni.requestPayment({\n\t\t        provider: e,\n\t\t        orderInfo: orderInfo.data,\n\t\t        success: (e) => {\n\t\t            console.log(\"success\", e);\n\t\t            uni.showToast({\n\t\t                title: \"感谢您的赞助!\"\n\t\t            })\n\t\t        },\n\t\t        fail: (e) => {\n\t\t            console.log(\"fail\", e);\n\t\t            uni.showModal({\n\t\t                content: \"支付失败,原因为: \" + e.errMsg,\n\t\t                showCancel: false\n\t\t            })\n\t\t        },\n\t\t        complete: () => {\n\t\t            this.loading = false;\n\t\t        }\n\t\t    })\n\t\t},\n\t\tgetOrderInfo(e) {\n\t\t    let appid = \"\";\n\n\n\n\t\t    let url = 'https://demo.dcloud.net.cn/payment/?payid=' + e + '&appid=' + appid + '&total=' + this.price;\n\t\t    return new Promise((res) => {\n\t\t        uni.request({\n\t\t            url: url,\n\t\t            success: (result) => {\n\t\t                res(result);\n\t\t            },\n\t\t            fail: (e) => {\n\t\t                res(e);\n\t\t            }\n\t\t        })\n\t\t    })\n\t\t},\n\t\trestPay(){\n\t\t\tthis.$loading()\n\t\t\tvar that=this\n\t\t\tvar params={\n\t\t\t\tuid:this.uid,\n\t\t\t\ttoken:this.token,\n\t\t\t\torderno:this.orderno\n\t\t\t}\n\t\t\tvar url='&r=api.member.order.pay'\n\t\t\t  this.$apiPost(url,params).then((res) =>{\n\t\t\t\tuni.hideLoading()\n\t\t\t\tthat.$msg('支付成功')\n\t\t\t\tuni.$emit('updateOrder')\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\turl:'./payResult?contact='+that.contact+'&money='+that.money+'&orderno='+that.orderno\n\t\t\t\t\t})\n\t\t\t\t},1000)\n\t\t\t  })\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cashier.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cashier.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}