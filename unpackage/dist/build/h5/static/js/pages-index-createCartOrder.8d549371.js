(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-createCartOrder"],{"056d":function(t,a,i){var e=i("db4a");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("16e3b21c",e,!0,{sourceMap:!1,shadowMode:!1})},"4a7a":function(t,a,i){"use strict";i("4160"),i("a15b"),i("acd8"),i("e25e"),i("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){return{data:[],totalPrice:0,totalAmount:0,form:{uid:"",token:"",goods:[],addressid:"",remark:""},address:"",spec:"",goodsImg:"",goodsName:"",total:"",contact:{}}},computed:{disabled1:function(){return this.form.amount<=1},disabled2:function(){return this.form.amount>=this.total}},onLoad:function(t){var a=uni.getStorageSync("userInfo"),i=this;""!=a&null!=a&void 0!=a&&(this.form.uid=a.uid,this.form.token=a.token,this.getAddressList());var e=JSON.parse(t.selectedGoods);this.data=e,e.forEach((function(t){console.log(t),i.form.goods.push({goodsid:t.goodsid,amount:t.amount,specifications:t.specs||"",freight:t.freight||0,skuidsort:t.skuidsort.join(",")}),i.totalAmount+=parseInt(t.amount),i.totalPrice+=parseFloat(t.marketprice)*parseInt(t.amount)}))},methods:{minus:function(){this.disabled1||--this.form.amount},plus:function(){this.disabled2||++this.form.amount},createOrder:function(){var t=this;this.$loading();var a=this,i="&r=api.member.order.create";console.log(this.form.goods),this.form.goods=JSON.stringify(this.form.goods),this.form.type=1,this.$apiPost(i,this.form).then((function(i){uni.navigateTo({url:"./cashier?orderId="+i.data.orderno+"&contact="+JSON.stringify(a.contact)+"&money="+t.totalPrice}),uni.hideLoading()}))},chooseAddress:function(){var t=this;uni.$on("chooseAddress",(function(a){t.address=a.province+a.city+a.district+a.address,t.form.addressid=a.id,t.contact=a,uni.$off("chooseAddress")})),uni.navigateTo({url:"../mine/addressList?type=choose"})},getAddressList:function(){var t=this,a={uid:this.form.uid,token:this.form.token,page:1,pagesize:99},i="&r=api.member.address";this.$apiPost(i,a).then((function(a){a.data.forEach((function(a){"1"==a.isdefault&&(t.address=a.province+a.city+a.district+a.address,t.form.addressid=a.id,t.contact=a)}))}))}}};a.default=e},5887:function(t,a,i){"use strict";var e,n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticStyle:{"padding-bottom":"80upx"}},[i("v-uni-view",{staticClass:"margin padding s2",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseAddress.apply(void 0,arguments)}}},[i("v-uni-text",[t._v("收货地址")]),i("v-uni-text",{staticClass:"cg fr"},[t._v(t._s(t.address?t.address:"添加收货地址")),i("v-uni-text",{staticClass:"icon-arrow-right iconfont"})],1)],1),t._l(t.data,(function(a,e){return i("v-uni-view",{key:e,staticClass:"child-overall padding margin"},[i("v-uni-view",{staticClass:"child-overall-item"},[i("v-uni-image",{attrs:{src:a.thumb,mode:""}}),i("v-uni-view",{staticClass:"info"},[i("v-uni-view",[i("v-uni-view",{staticClass:"s2 title"},[t._v(t._s(a.title))]),i("v-uni-view",{staticClass:"s3 cg options"},[t._v(t._s(a.specs?a.specs:"无规格"))])],1),i("v-uni-view",{staticClass:"s3",staticStyle:{"text-align":"right"}},[i("v-uni-view",{},[t._v("￥"+t._s(a.marketprice))]),i("v-uni-view",{staticClass:" cg"},[t._v("*"+t._s(a.amount))])],1)],1)],1),i("v-uni-view",{staticStyle:{"text-align":"right",margin:"70upx 0 0"}},[t._v("共"+t._s(a.amount)+"件商品 共计:"),i("v-uni-text",{staticClass:"cr"},[t._v("￥"+t._s(a.marketprice*a.amount))])],1)],1)})),i("v-uni-view",{staticClass:"margin padding msg"},[i("v-uni-text",[t._v("买家留言")]),i("v-uni-textarea",{attrs:{maxlength:"50",placeholder:"50字以内(选填)"},model:{value:t.form.remark,callback:function(a){t.$set(t.form,"remark",a)},expression:"form.remark"}})],1),i("v-uni-view",{staticClass:"padding conclude"},[i("v-uni-view",[i("v-uni-text",[t._v("商品小计")]),i("v-uni-text",{staticClass:"fr"},[t._v("￥"+t._s(t.totalPrice))])],1),i("v-uni-view",[i("v-uni-text",[t._v("运费")]),i("v-uni-text",{staticClass:"fr"},[t._v("￥0.00")])],1)],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"bottom-right",staticStyle:{"text-align":"right"}},[i("v-uni-text",{staticClass:"s2 cg"},[t._v("共"+t._s(t.totalAmount)+"件,")]),i("v-uni-text",{staticClass:"cg s1"},[t._v("合计:")]),i("v-uni-text",{staticClass:"cr",staticStyle:{"font-size":"34upx"}},[t._v("￥"+t._s(t.totalPrice))]),i("v-uni-button",{attrs:{type:"warn"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.createOrder.apply(void 0,arguments)}}},[t._v("立即支付")])],1)],1)],2)},o=[];i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return o})),i.d(a,"a",(function(){return e}))},"9f7b":function(t,a,i){"use strict";i.r(a);var e=i("4a7a"),n=i.n(e);for(var o in e)"default"!==o&&function(t){i.d(a,t,(function(){return e[t]}))}(o);a["default"]=n.a},ccce:function(t,a,i){"use strict";var e=i("056d"),n=i.n(e);n.a},db4a:function(t,a,i){var e=i("24fb");a=e(!1),a.push([t.i,"uni-page-body[data-v-fd084caa]{background:#f3f3f3}.margin[data-v-fd084caa]{margin:%?20?% 0;background-color:#fff}.child-overall[data-v-fd084caa],.overall[data-v-fd084caa]{padding:%?20?% %?15?%}.child-overall[data-v-fd084caa]:last-child{padding-bottom:%?40?%}.child-overall-item[data-v-fd084caa],\n.overall[data-v-fd084caa]{display:-webkit-box;display:-webkit-flex;display:flex;justify-items:center}.child-overall-item>uni-image[data-v-fd084caa]{width:%?150?%;height:%?150?%;margin-right:%?20?%}.child-overall-item .title[data-v-fd084caa]{width:%?360?%;\n\t/* height: 64upx; */margin-top:%?10?%;overflow:hidden;/*一定要写 */text-overflow:ellipsis;/*超出省略号 */display:-webkit-box;/*一定要写 */-webkit-line-clamp:2;/*控制行数 */-webkit-box-orient:vertical/*一定要写 */}.bottom-content[data-v-fd084caa]{margin:%?20?% 0}.options[data-v-fd084caa]{margin:%?25?% 0 0}.calculator uni-text[data-v-fd084caa]{display:inline-block;vertical-align:middle}.calculator .calc[data-v-fd084caa],\n.calculator .result[data-v-fd084caa]{display:inline-block;vertical-align:middle;width:%?60?%;height:%?60?%;font-size:%?36?%;line-height:%?60?%;text-align:center;border:1px solid #e8e8e8}.calculator .result[data-v-fd084caa]{width:%?80?%;text-align:center;border:1px solid #e8e8e8}.info[data-v-fd084caa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.msg>uni-text[data-v-fd084caa],\n.msg>uni-textarea[data-v-fd084caa]{display:inline-block;vertical-align:top}.msg>uni-text[data-v-fd084caa]{margin-right:%?30?%}.msg>uni-textarea[data-v-fd084caa]{width:60%;max-height:%?160?%}.conclude[data-v-fd084caa]{background-color:#fff}.conclude>uni-view[data-v-fd084caa]{margin:%?20?% 0}.bottom[data-v-fd084caa]{position:fixed;left:0;bottom:0;width:100%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:0 0 0 %?40?%;background-color:#fff;border:1px solid #f1f1f1}.bottom-right uni-button[data-v-fd084caa]{margin-left:%?15?%;height:100%;height:%?80?%;border-radius:0;font-size:%?30?%}.bottom-right uni-button[data-v-fd084caa],\n.bottom-right uni-text[data-v-fd084caa]{display:inline-block;vertical-align:middle}.bottom-right[data-v-fd084caa]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right}.disabled[data-v-fd084caa]{border-color:#f4f4f4;background-color:#f4f4f4}body.?%PAGE?%[data-v-fd084caa]{background:#f3f3f3}",""]),t.exports=a},ed6a:function(t,a,i){"use strict";i.r(a);var e=i("5887"),n=i("9f7b");for(var o in n)"default"!==o&&function(t){i.d(a,t,(function(){return n[t]}))}(o);i("ccce");var s,d=i("f0c5"),r=Object(d["a"])(n["default"],e["b"],e["c"],!1,null,"fd084caa",null,!1,e["a"],s);a["default"]=r.exports}}]);