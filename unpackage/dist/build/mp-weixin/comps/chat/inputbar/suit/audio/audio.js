(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["comps/chat/inputbar/suit/audio/audio"],{"517c":function(e,t,o){"use strict";o.r(t);var n=o("fe1d"),c=o("caca");for(var r in c)"default"!==r&&function(e){o.d(t,e,(function(){return c[e]}))}(r);o("b3a4");var a,i=o("f0c5"),s=Object(i["a"])(c["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);t["default"]=s.exports},"7c8d":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("57fd"),c=o("3eb5"),r=c.RecordStatus,a=c.RecordDesc,i=o("ac99"),s=!1,u=null,d=[50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50],h={components:{},data:function(){return{changedTouches:null,recordStatus:r.HIDE,RecordStatus:r,RecordDesc:a,radomheight:d,recorderManager:e.getRecorderManager(),recordClicked:!1,recordTime:0}},props:{username:{type:Object,value:{}},chatType:{type:String,value:n.chatType.SINGLE_CHAT}},onUnload:function(){},methods:{toggleWithoutAction:function(e){},toggleRecordModal:function(){this.recordStatus=this.recordStatus==r.HIDE?r.SHOW:r.HIDE,this.radomheight=d},handleRecordingMove:function(e){var t=e.touches[0],o=this.changedTouches;o&&(this.recordStatus==r.SWIPE&&o.pageY-t.pageY<20&&(this.recordStatus=r.HOLD),this.recordStatus==r.HOLD&&o.pageY-t.pageY>20&&(this.recordStatus=r.SWIPE))},handleRecording:function(t){var o=this;function n(){e.getSetting({success:function(t){var n=t.authSetting["scope.record"];0==n?e.openSetting({success:function(t){var n=t.authSetting["scope.record"];1==n?e.showToast({title:"授权成功",icon:"success"}):e.showToast({title:"请授权录音",icon:"none"}),o.isLongPress=!1}}):1==n?c():e.authorize({scope:"scope.record",success:function(){e.showToast({title:"授权成功",icon:"success"})},fail:function(e){console.log(e)}})},fail:function(){e.showToast({title:"鉴权失败，请重试",icon:"none"})}})}function c(){o.changedTouches=t.touches[0],o.recordStatus=r.HOLD,s=!0,o.myradom();var n=o.recorderManager||e.getRecorderManager();n.onStart((function(){u=setInterval((function(){o.recordTime+=1}),1e3)})),n.start({format:"mp3"}),setTimeout((function(){o.handleRecordingCancel(),s=!1}),1e5)}o.recordClicked=!0,setTimeout((function(){1==o.recordClicked&&n()}),350)},handleRecordingCancel:function(){var t=this;s=!1;var o=this.recorderManager;this.recordStatus==r.SWIPE?this.recordStatus=r.RELEASE:(this.recordStatus=r.HIDE,this.recordClicked=!1),o.onStop((function(o){var n=1e3*t.recordTime;if(t.recordStatus==r.RELEASE)return console.log("user canceled"),void(t.recordStatus=r.HIDE);n<=1e3?e.showToast({title:"录音时间太短",icon:"none"}):t.uploadRecord(o.tempFilePath,n),clearInterval(u),t.recordStatus=r.HIDE,t.recordTime=0})),o.stop()},isGroupChat:function(){return this.chatType==n.chatType.CHAT_ROOM},getSendToParam:function(){return this.isGroupChat()?this.username.groupId:this.username.your},uploadRecord:function(t,o){var c=this.$im.config.appkey.split("#"),r=this,a=this.$im.conn.context.accessToken;e.uploadFile({url:"https://a1.easemob.com/"+c[0]+"/"+c[1]+"/chatfiles",filePath:t,name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},success:function(c){var s=r.$im.conn.getUniqueId(),u=new r.$im.message(n.AUDIO,s),d=JSON.parse(c.data);u.set({apiUrl:r.$im.config.apiURL,accessToken:a,body:{type:n.AUDIO,url:d.uri+"/"+d.entities[0].uuid,filetype:"",filename:t,accessToken:a,length:Math.ceil(o/1e3)},from:r.username.myName,to:r.getSendToParam(),roomType:!1,chatType:r.chatType,success:function(e){i.fire("em.chat.sendSuccess",s)}}),r.isGroupChat()&&u.setGroup("groupchat"),u.body.length=Math.ceil(o/1e3),r.$im.conn.send(u.body),e.$emit("saveSendMsg",{msg:u,type:n.AUDIO})}})},myradom:function(){for(var e=this,t=e.radomheight,o=0;o<e.radomheight.length;o++)t[o]=100*Math.random().toFixed(2)+10;e.radomheight=t,s&&setTimeout((function(){e.myradom()}),500)}}};t.default=h}).call(this,o("543d")["default"])},ae2c:function(e,t,o){},b3a4:function(e,t,o){"use strict";var n=o("ae2c"),c=o.n(n);c.a},caca:function(e,t,o){"use strict";o.r(t);var n=o("7c8d"),c=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,(function(){return n[e]}))}(r);t["default"]=c.a},fe1d:function(e,t,o){"use strict";var n,c=function(){var e=this,t=e.$createElement;e._self._c},r=[];o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return n}))}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'comps/chat/inputbar/suit/audio/audio-create-component',
    {
        'comps/chat/inputbar/suit/audio/audio-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("517c"))
        })
    },
    [['comps/chat/inputbar/suit/audio/audio-create-component']]
]);
