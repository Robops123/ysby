(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/loginMobile"],{"0142":function(e,i,t){"use strict";var n,o=function(){var e=this,i=e.$createElement;e._self._c},a=[];t.d(i,"b",(function(){return o})),t.d(i,"c",(function(){return a})),t.d(i,"a",(function(){return n}))},"36f6":function(e,i,t){"use strict";(function(e){t("fabc");n(t("66fd"));var i=n(t("47ee"));function n(e){return e&&e.__esModule?e:{default:e}}e(i.default)}).call(this,t("543d")["createPage"])},"47ee":function(e,i,t){"use strict";t.r(i);var n=t("0142"),o=t("a5c8");for(var a in o)"default"!==a&&function(e){t.d(i,e,(function(){return o[e]}))}(a);t("574e");var s,r=t("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);i["default"]=c.exports},"574e":function(e,i,t){"use strict";var n=t("9e0b"),o=t.n(n);o.a},"9e0b":function(e,i,t){},a5c8:function(e,i,t){"use strict";t.r(i);var n=t("b0b4"),o=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(i,e,(function(){return n[e]}))}(a);i["default"]=o.a},b0b4:function(e,i,t){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){Promise.all([t.e("common/vendor"),t.e("components/s-popup/index")]).then(function(){return resolve(t("5186"))}.bind(null,t)).catch(t.oe)},o={components:{sPopup:n},data:function(){return{array:["中国+86"],index:0,mobile:"",passitive:"",code:"",params:{},visible:!1,vericode:"",verimobile:"",remain:60,timer:null,enable:!0}},onLoad:function(e){this.passitive=e.passitive},methods:{contact:function(){e.navigateTo({url:"/pages/index/webKf"})},bindPickerChange:function(e){this.index=e.detail.value},next:function(){var e=/^1[3456789]\d{9}$/;e.test(this.mobile)?this.testLogin():this.$msg("请输入正确的手机号")},testLogin:function(){var i=this;this.$loading();var t="&r=api.member.account.login&mobile="+this.mobile+"&pwd=";this.$apiPost(t).then((function(e){})).catch((function(t){"用户不存在"==t.resultMessage?e.navigateTo({url:"/pages/login/register?mobile="+i.mobile+"&passitive="+i.passitive}):e.navigateTo({url:"/pages/login/loginPsd?mobile="+i.mobile+"&passitive="+i.passitive}),e.hideLoading()}))},openPDF:function(){e.openDocument({filePath:"https://example.com/somefile.pdf",success:function(e){}})},openWebView:function(i,t){e.navigateTo({url:"/pages/login/agreement?type="+i+"&title="+t})},authorizeLogin:function(){var i=this;e.login({provider:"weixin",scopes:"auth_user",success:function(t){e.getUserInfo({provider:"weixin",success:function(e){var t=e.userInfo,n={unionId:t.unionId,avatarUrl:t.avatarUrl.replace("http://","https://"),nickName:t.nickName,type:"1"};console.log(e),i.bind(n)}})}})},getphonenumber:function(e){var i=this;if(e.detail.iv&&e.detail.encryptedData){var t={iv:e.detail.iv,encryptedData:e.detail.encryptedData,code:i.code};i=this;i.getMpMobile(t)}},getuserinfo:function(e){console.log(e)},getMpMobile:function(i){var t=this,n="&r=api.member.account.getPhoneNumber";this.$apiPost(n,i).then((function(i){t.params.mobile=i.data.purePhoneNumber,e.login({provider:"weixin",success:function(i){t.params.code=i.code,e.getUserInfo({provider:"weixin",success:function(e){t.params.type="2",t.params.iv=e.iv,t.params.encryptedData=e.encryptedData,t.bind(t.params)}})}})}))},bind:function(i){this.$loading();var t=this,n="&r=api.member.account.loginByoAuth";this.$apiPost(n,i).then((function(i){e.hideLoading(),e.setStorageSync("userInfo",i.data),t.$conn.open({apiUrl:t.$im.config.apiURL,user:i.data.hx_openid,pwd:i.data.hx_pwd,grant_type:"password",appKey:t.$im.config.appkey}),e.setStorageSync("myUsername",i.data.hx_openid),t.passitive?(e.$emit("logined"),e.navigateBack({delta:1})):e.switchTab({url:"../tabBar/mine"}),t.$msg("登录成功")})).catch((function(e){console.log(e),"400101"==e.resultCode&&"1"==i.type&&(t.params=i,t.visible=!0)}))},loginMP:function(){var i=this;e.login({provider:"weixin",success:function(e){i.code=e.code}})},submit:function(){this.vericode?(this.params.mobile=this.verimobile,this.params.verifycode=this.vericode,this.bind(this.params)):this.$msg("请输入验证码")},getveri:function(){if(this.enable){var e=/^1[3456789]\d{9}$/;if(!e.test(this.verimobile))return void this.$msg("请输入正确的手机号");this.getcode()}},settime:function(){1==this.remain?(this.remain=60,clearInterval(this.timer),this.enable=!0):this.remain--},getcode:function(){var i=this;this.$loading();var t={mobile:this.verimobile,type:3},n="&r=api.member.account.registercode";this.$apiPost(n,t).then((function(t){e.hideLoading(),i.$msg("验证码发送成功"),i.enable=!1,i.timer=setInterval((function(){i.settime()}),1e3)}))}}};i.default=o}).call(this,t("543d")["default"])}},[["36f6","common/runtime","common/vendor"]]]);