(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/suggestion"],{"1d0f":function(t,e,i){"use strict";i.r(e);var n=i("c33a"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,(function(){return n[t]}))}(u);e["default"]=a.a},"2d9e":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c},u=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return u})),i.d(e,"a",(function(){return n}))},5636:function(t,e,i){"use strict";i.r(e);var n=i("2d9e"),a=i("1d0f");for(var u in a)"default"!==u&&function(t){i.d(e,t,(function(){return a[t]}))}(u);i("90af");var s,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=c.exports},"6ffd":function(t,e,i){},"766c":function(t,e,i){"use strict";(function(t){i("fabc");n(i("66fd"));var e=n(i("5636"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"90af":function(t,e,i){"use strict";var n=i("6ffd"),a=i.n(n);a.a},c33a:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("4795"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,i,n,a,u,s){try{var o=t[u](s),c=o.value}catch(r){return void i(r)}o.done?e(c):Promise.resolve(c).then(n,a)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var s=t.apply(e,i);function o(t){u(s,n,a,o,c,"next",t)}function c(t){u(s,n,a,o,c,"throw",t)}o(void 0)}))}}var o=[["camera"],["album"],["camera","album"]],c=[["compressed"],["original"],["compressed","original"]],r={data:function(){return{uid:"",token:"",mobile:"",img:"",content:"",imageList:[],pic:[],imageLength:3}},mounted:function(){var e=t.getStorageSync("userInfo");this.uid=e.uid,this.token=e.token},methods:{chooseImage:function(){var e=s(n.default.mark((function e(){var i=this;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.chooseImage({sourceType:o[this.sourceTypeIndex],sizeType:c[this.sizeTypeIndex],count:this.imageLength-this.imageList.length,success:function(t){i.imageList=i.imageList.concat(t.tempFilePaths)}});case 1:case"end":return e.stop()}}),e,this)})));function i(){return e.apply(this,arguments)}return i}(),previewImage:function(e){var i=e.target.dataset.src;t.previewImage({current:i,urls:this.imageList})},deleteImage:function(t){var e=t.target.dataset.index,i=this,n=i.imageList;n.splice(e,1),i.imageList=n},submit:function(){var t=this,e=this,i=this.imageList.length;this.mobile?this.content?0!=i?(this.$loading(),this.imageList.forEach((function(n,a){if(n.indexOf("http://")<0&&n.indexOf("https://")<0)e.$upload(n,"",(function(t){e.pic.push(t);var n=e.pic.length;i==n&&e.submitSuggestion()}));else{e.pic.push(n);var u=t.pic.length;i==u&&e.submitSuggestion()}}))):this.$msg("至少需上传一张图片"):this.$msg("请填写内容"):this.$msg("请填写联系方式")},submitSuggestion:function(){var e=this,i={uid:this.uid,token:this.token,content:this.content,mobile:this.mobile,img:this.pic.join(",")},n="&r=api.member.advice";this.$apiPost(n,i).then((function(i){t.hideLoading(),e.$msg("提交成功,谢谢参与"),setTimeout((function(){t.navigateBack({delta:1})}),1500)}))}}};e.default=r}).call(this,i("543d")["default"])}},[["766c","common/runtime","common/vendor"]]]);