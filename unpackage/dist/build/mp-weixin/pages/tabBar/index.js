(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/index"],{1220:function(t,n,e){"use strict";e.r(n);var i=e("7b59"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a},"1b07":function(t,n,e){"use strict";(function(t){e("fabc");i(e("66fd"));var n=i(e("4bca"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"4bca":function(t,n,e){"use strict";e.r(n);var i=e("bc70"),a=e("1220");for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("e44b");var s,c=e("f0c5"),u=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);n["default"]=u.exports},"7b59":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("9665"));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){Promise.all([e.e("common/vendor"),e.e("pages/indexComponents/navBar")]).then(function(){return resolve(e("e2ff"))}.bind(null,e)).catch(e.oe)},s=function(){e.e("components/uni-rate/uni-rate").then(function(){return resolve(e("1006"))}.bind(null,e)).catch(e.oe)},c=function(){e.e("components/uni-status-bar/uni-status-bar").then(function(){return resolve(e("039e"))}.bind(null,e)).catch(e.oe)},u=function(){e.e("components/sku/pages/sku").then(function(){return resolve(e("e937"))}.bind(null,e)).catch(e.oe)},r=function(){e.e("components/uni-badge/uni-badge").then(function(){return resolve(e("07be"))}.bind(null,e)).catch(e.oe)},d={components:{navBar:o,uniRate:s,uniStatusBar:c,sku:u,uniBadge:r},data:function(){return{mediaContext:"",merchModelStatus:0,nickName:"aa",avatarUrl:"",defaultPrice:0,defaultImg:"",id:"",category:[],receivedCategory:!1,total:0,logined:!1,uid:"",token:"",located:!0,city:"",productList:[],brandList:[],hotList:[],noticeList:[],carouselList:[],bargainList:[],bannerList:[],businessList:[],lng:"",lat:"",amapPlugin:null,key:"364f9609be0c585e1d79d1c6f5ca4faf",activityData:{}}},onShow:function(){var n=t.getStorageSync("userInfo");""!=n&null!=n&void 0!=n?(this.logined=!0,this.uid=n.uid,this.token=n.token):this.logined=!1},mounted:function(){var n=this;t.$on("logined",(function(){var e=t.getStorageSync("userInfo");n.logined=!0,n.uid=e.uid,n.token=e.token})),this.amapPlugin=new i.default.AMapWX({key:this.key}),this.wdnmd(),this.getGoodsCate(),this.getHotList(),this.getNotice(),this.getCarsouselList(),this.getBargain(),this.getBanner(),this.getNearbyBusiness(),this.getActivity()},methods:{toBannerDetail:function(n){switch(console.log(n),n.type){case"1":t.navigateTo({url:"/pages/index/bannerDetail?url="+encodeURIComponent(n.link)});break;case"2":t.navigateTo({url:"/pages/index/goodsDetail?id="+n.goodsid});break;case"3":t.navigateTo({url:"/pages/bussiness/shopPreview?id="+n.merchid});break}},contact:function(){t.navigateTo({url:"/pages/index/webKf"})},toDiscover:function(){t.switchTab({url:"./discover"})},toCategory:function(n,e){t.navigateTo({url:"/pages/index/goodsCategory?type=".concat(n,"&extra=").concat(e)})},toDetail:function(n){t.navigateTo({url:"/pages/index/goodsDetail?id=".concat(n)})},toGoodsList:function(n,e){t.navigateTo({url:"/pages/index/goodsList?id=".concat(n,"&title=").concat(e)})},getGoodsCate:function(){var t=this,n="&r=api.home.category";this.$apiPost(n).then((function(n){t.productList=n.data.slice(0,4),t.getBrandCate()}))},getBrandCate:function(){var t=this,n="&r=api.home.brand";this.$apiPost(n).then((function(n){t.brandList=n.data}))},getNotice:function(t){var n=this,e=this,i="&r=api.home.notice";this.$apiPost(i).then((function(t){e.noticeList=t.data})).catch((function(t){n.$msg(t)}))},getHotList:function(t){var n=this,e=this,i="&r=api.home.goods.hotsale";this.$apiPost(i).then((function(t){e.hotList=t.data.category})).catch((function(t){n.$msg(t)}))},getCarsouselList:function(t){var n=this,e=this,i="&r=api.home.banner";this.$apiPost(i).then((function(t){e.carouselList=t.data})).catch((function(t){n.$msg(t)}))},getBargain:function(){var t=this,n=this,e="&r=api.home.goods.bargain";this.$apiPost(e).then((function(t){n.bargainList=t.data})).catch((function(n){t.$msg(n)}))},getActivity:function(){var t=this,n=this,e="&r=api.home.activity";this.$apiPost(e).then((function(t){n.activityData=t.data[0]})).catch((function(n){t.$msg(n)}))},getBanner:function(){var t=this,n=this,e="&r=api.home.adv";this.$apiPost(e).then((function(t){n.bannerList=t.data})).catch((function(n){t.$msg(n)}))},wdnmd:function(){var t=this,n=this,e="&r=api.mo";this.$apiPost(e).then((function(t){n.merchModelStatus=Number(t.data.status)})).catch((function(n){t.$msg(n)}))},getNearbyBusiness:function(){this.mpLocate()},mpLocate:function(){var t=this;console.log("mplocate"),this.amapPlugin.getRegeo({success:function(n){t.city=n[0].regeocodeData.addressComponent.city,t.lng=n[0].longitude,t.lat=n[0].latitude;var e={longitude:n[0].longitude,latitude:n[0].latitude};t.located=!0,t.getNearBy(e)},fail:function(n){console.log(n),t.located=!1,t.getNearBy({}),t.$msg("请打开定位功能")}})},appLocate:function(){var n=this;t.getLocation({type:"wgs84",geocode:!0,success:function(t){n.city=t.address.city,n.lng=t.longitude,n.lat=t.latitude,n.located=!0,n.getNearBy(t)},fail:function(t){n.located=!1,n.getNearBy({}),n.$msg("请打开定位功能")}})},getNearBy:function(t){var n=this,e="&r=api.home.merchant",i={lng:t.longitude||"",lat:t.latitude||""},a=this;this.$apiPost(e,i).then((function(t){a.businessList=t.data.map((function(t){return t.distance=parseInt(t.distance),t}))})).catch((function(t){n.$msg(t)}))},toShop:function(n){t.navigateTo({url:"/pages/bussiness/shopPreview?id=".concat(n)})},toGoodsDetail:function(n,e){t.navigateTo({url:"/pages/index/goodsDetail?id="+n+"&merchId="+e})},getCategory:function(n,e,i){var a=this.$operateInterceptor(this.logined);if(a){this.defaultImg=e,this.defaultPrice=i.split(" - ")[0],this.$loading(),this.id=n;var o=this,s="&r=api.goods.detail.sku&goodsid="+n;this.$apiPost(s).then((function(n){o.category=n.data,o.total=n.stock,o.receivedCategory=!0,o.$nextTick((function(){o.$refs.sku.specClass="show",t.hideLoading()}))}))}},completeSpecChoose:function(t){this.addCollect(this.id,t.choosedid.join(","),t.selectArr),this.receivedCategory=!1},addCollect:function(n,e,i){this.$loading();var a=this,o={uid:this.uid,token:this.token,goodsid:n,specifications:i,skuidsort:e},s="&r=api.member.cart.add";this.$apiPost(s,o).then((function(n){t.hideLoading(),a.$msg("添加成功")}))},noticeChange:function(t){console.log(t)}}};n.default=d}).call(this,e("543d")["default"])},bc70:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var i={uniRate:function(){return e.e("components/uni-rate/uni-rate").then(e.bind(null,"1006"))}},a=function(){var t=this,n=t.$createElement;t._self._c},o=[]},d7d2:function(t,n,e){},e44b:function(t,n,e){"use strict";var i=e("d7d2"),a=e.n(i);a.a}},[["1b07","common/runtime","common/vendor"]]]);